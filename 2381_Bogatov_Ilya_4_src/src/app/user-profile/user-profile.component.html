<mat-card class="user-profile-card">
  <mat-card-header class="profile-header">
    <div *ngIf="user?.avatar === 'no-avatar'; else showAvatar" mat-card-avatar class="no-avatar">
      <mat-icon>account_box</mat-icon>
    </div>
    <ng-template #showAvatar>
      <img mat-card-avatar [ngSrc]="user?.avatar || ''" alt="Аватар пользователя" width="40" height="40">
    </ng-template>
    <mat-card-title>{{ user?.firstName }} {{ user?.lastName }}</mat-card-title>
    <mat-card-subtitle>{{ user?.bio }}</mat-card-subtitle>
  </mat-card-header>
  <mat-divider/>
  <div class="profile-info">
    <div class="info-row">
      <span class="info-label">Дата рождения:</span>
      <span class="info-value">{{ user?.birthday | date: 'mediumDate' }}</span>
    </div>
    <div class="info-row">
      <span class="info-label">Подписчики:</span>
      <span class="info-value">{{ (user?.followers || []).length }}</span>
    </div>
    <div class="info-row">
      <span class="info-label">Подписки:</span>
      <span class="info-value">{{ (user?.following || []).length }}</span>
    </div>
  </div>
  <mat-divider/>
  <div class="action-buttons">
    <ng-container *ngIf="!isOwnProfile(); else showOwnButtons">
      <button mat-raised-button color="primary" (click)="startChat()">Сообщение</button>
      <button mat-raised-button color="accent" (click)="toggleSubscription()">
        {{ (user?.followers || []).includes(getIdFromCookies()) ? 'Отписаться' : 'Подписаться' }}
      </button>
    </ng-container>
    <ng-template #showOwnButtons>
      <button mat-raised-button color="primary">Редактировать</button>
    </ng-template>
  </div>
</mat-card>
<mat-card *ngIf="isOwnProfile()" class="input-container">
  <mat-card-header>
    <mat-card-title>Поделиться</mat-card-title>
  </mat-card-header>
  <mat-card-content>
    <mat-form-field class="message-input" appearance="outline">
      <mat-label>Сообщение</mat-label>
      <input matInput [(ngModel)]="postText" (keyup.enter)="createPost()">
    </mat-form-field>
    <button mat-icon-button color="primary" (click)="createPost()">
      <mat-icon>send</mat-icon>
    </button>
  </mat-card-content>
</mat-card>
